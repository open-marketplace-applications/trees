import{S as e,i as t,s as n,e as a,c as s,a as o,d as r,b as i,f as l,M as c,z as u,P as $,j as p,k as m,t as f,m as g,n as d,g as h,o as v,G as b,h as w,v as y,r as B,w as k,Q as S,R as E,T as O,U as T,V as j,W as _,X as x,Y as P,Z as q,B as z,u as C,_ as L}from"../../chunks/vendor-491fc14c.js";import{_ as V}from"../../chunks/preload-helper-9f12a5fd.js";import{a as D}from"../../chunks/areas-a1feba8e.js";import{v as N}from"../../chunks/variables-fc0f151f.js";function A(e){let t;return{c(){t=a("div"),this.h()},l(e){t=s(e,"DIV",{id:!0,class:!0}),o(t).forEach(r),this.h()},h(){i(t,"id","map"),i(t,"class","svelte-vxziu5")},m(e,n){l(e,t,n)},p:c,i:c,o:c,d(e){e&&r(t)}}}function F(e,t,n){let{position:a}=t,{onChange:s}=t,o=null;return u((async()=>{{const e=await V((()=>import("../../chunks/leaflet-src-353024f8.js").then((function(e){return e.l}))),["/_app/chunks/leaflet-src-353024f8.js","/_app/chunks/vendor-491fc14c.js","/_app/assets/vendor-d28434f8.css"]),t=e.map("map").setView(a,21).on("moveend",(function(s){t.removeLayer(o),n(0,a=t.getCenter()),o=e.marker(a).on("click",(function(e){})).addTo(t).bindPopup("Setze deinen Baum hier!").openPopup()}));e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(t),D.forEach((n=>{e.polygon(n.edges,{color:"blue",weight:1}).on("click",(function(e){console.info(e)})).addTo(t)})),o=e.marker(a).on("click",(function(e){})).addTo(t).bindPopup("Setze deinen Baum hier!").openPopup()}})),e.$$set=e=>{"position"in e&&n(0,a=e.position),"onChange"in e&&n(1,s=e.onChange)},[a,s]}class G extends e{constructor(e){super(),t(this,e,F,A,n,{position:0,onChange:1})}}function I(e){let t,n;return t=new L({}),{c(){p(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){v(t,e,a),n=!0},i(e){n||(y(t.$$.fragment,e),n=!0)},o(e){B(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function R(e){let t,n,c,u,$,w,S,E,O,T,L,V,D,N,A,F,R,M,U,J,Q,W,X,Y;function Z(t){e[5](t)}t=new j({props:{name:"tree.name",label:"Name (Optional)",placeholder:"e.g. Baum Nr 42"}}),c=new j({props:{name:"tree.description",label:"Description  (Optional)",placeholder:"noticeable features",multiline:!0}}),E=new _({props:{name:"tree.genus",options:e[4]}});let H={name:"tree.lat",label:"lat"};function K(t){e[6](t)}void 0!==e[0].lat&&(H.value=e[0].lat),T=new j({props:H}),x.push((()=>P(T,"value",Z)));let ee={name:"tree.lng",label:"lng"};function te(t){e[7](t)}void 0!==e[0].lng&&(ee.value=e[0].lng),D=new j({props:ee}),x.push((()=>P(D,"value",K)));let ne={};void 0!==e[0]&&(ne.position=e[0]),F=new G({props:ne}),x.push((()=>P(F,"position",te)));let ae=e[8]&&I();return{c(){p(t.$$.fragment),n=m(),p(c.$$.fragment),u=m(),$=a("label"),w=f("Genus"),S=m(),p(E.$$.fragment),O=m(),p(T.$$.fragment),V=m(),p(D.$$.fragment),A=m(),p(F.$$.fragment),M=m(),U=a("div"),J=a("button"),Q=f("Submit"),X=m(),ae&&ae.c(),this.h()},l(e){g(t.$$.fragment,e),n=d(e),g(c.$$.fragment,e),u=d(e),$=s(e,"LABEL",{});var a=o($);w=h(a,"Genus"),a.forEach(r),S=d(e),g(E.$$.fragment,e),O=d(e),g(T.$$.fragment,e),V=d(e),g(D.$$.fragment,e),A=d(e),g(F.$$.fragment,e),M=d(e),U=s(e,"DIV",{class:!0});var i=o(U);J=s(i,"BUTTON",{type:!0,disabled:!0,class:!0});var l=o(J);Q=h(l,"Submit"),l.forEach(r),X=d(i),ae&&ae.l(i),i.forEach(r),this.h()},h(){i(J,"type","submit"),J.disabled=W=e[8],i(J,"class","svelte-1lqbrwz"),i(U,"class","buttons svelte-1lqbrwz")},m(e,a){v(t,e,a),l(e,n,a),v(c,e,a),l(e,u,a),l(e,$,a),b($,w),l(e,S,a),v(E,e,a),l(e,O,a),v(T,e,a),l(e,V,a),v(D,e,a),l(e,A,a),v(F,e,a),l(e,M,a),l(e,U,a),b(U,J),b(J,Q),b(U,X),ae&&ae.m(U,null),Y=!0},p(e,t){const n={};!L&&1&t&&(L=!0,n.value=e[0].lat,q((()=>L=!1))),T.$set(n);const a={};!N&&1&t&&(N=!0,a.value=e[0].lng,q((()=>N=!1))),D.$set(a);const s={};!R&&1&t&&(R=!0,s.position=e[0],q((()=>R=!1))),F.$set(s),(!Y||256&t&&W!==(W=e[8]))&&(J.disabled=W),e[8]?ae?256&t&&y(ae,1):(ae=I(),ae.c(),y(ae,1),ae.m(U,null)):ae&&(z(),B(ae,1,1,(()=>{ae=null})),C())},i(e){Y||(y(t.$$.fragment,e),y(c.$$.fragment,e),y(E.$$.fragment,e),y(T.$$.fragment,e),y(D.$$.fragment,e),y(F.$$.fragment,e),y(ae),Y=!0)},o(e){B(t.$$.fragment,e),B(c.$$.fragment,e),B(E.$$.fragment,e),B(T.$$.fragment,e),B(D.$$.fragment,e),B(F.$$.fragment,e),B(ae),Y=!1},d(e){k(t,e),e&&r(n),k(c,e),e&&r(u),e&&r($),e&&r(S),k(E,e),e&&r(O),k(T,e),e&&r(V),k(D,e),e&&r(A),k(F,e),e&&r(M),e&&r(U),ae&&ae.d()}}}function M(e){let t,n,i,c,u;return t=new $({props:{schema:e[3],validateOnChange:!0,validateOnBlur:!0,$$slots:{default:[R,({isSubmitting:e})=>({8:e}),({isSubmitting:e})=>e?256:0]},$$scope:{ctx:e}}}),t.$on("submit",e[2]),{c(){p(t.$$.fragment),n=m(),i=a("pre"),c=f(e[1])},l(a){g(t.$$.fragment,a),n=d(a),i=s(a,"PRE",{});var l=o(i);c=h(l,e[1]),l.forEach(r)},m(e,a){v(t,e,a),l(e,n,a),l(e,i,a),b(i,c),u=!0},p(e,[n]){const a={};769&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a),(!u||2&n)&&w(c,e[1])},i(e){u||(y(t.$$.fragment,e),u=!0)},o(e){B(t.$$.fragment,e),u=!1},d(e){k(t,e),e&&r(n),e&&r(i)}}}function U(e,t,n){let a,s={lat:49.291676,lng:7.373426};console.log("yp",S);const o=E().shape({tree:E().shape({name:O(),description:O(),genus:O().required(),lng:T().required(),lat:T().required()})});return e.$$.update=()=>{var t;1&e.$$.dirty&&(t=s,console.log("compareToB"),console.log(t))},[s,a,async function({detail:{values:e,setSubmitting:t,resetForm:o}}){try{console.log("values",e),e.tree.lat=s.lat.toString(),e.tree.lng=s.lng.toString();const n={method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e.tree)},a=await fetch(N.apiPath+"/trees",n),o=await a.json();console.log("response",o),t(!0)}catch(r){console.log("error",r)}n(1,a=e)},o,[{id:"Eiche (Oak)",title:"Eiche (Oak)"},{id:"Fichte (Spruce)",title:"Fichte (Spruce)"},{id:"Birch (Birke)",title:"Birch (Birke)"},{id:"Buche (Beech)",title:"Buche (Beech)"}],function(t){e.$$.not_equal(s.lat,t)&&(s.lat=t,n(0,s))},function(t){e.$$.not_equal(s.lng,t)&&(s.lng=t,n(0,s))},function(e){s=e,n(0,s)}]}class J extends e{constructor(e){super(),t(this,e,U,M,n,{})}}function Q(e){let t,n;return t=new J({}),{c(){p(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){v(t,e,a),n=!0},p:c,i(e){n||(y(t.$$.fragment,e),n=!0)},o(e){B(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}export default class extends e{constructor(e){super(),t(this,e,null,Q,n,{})}}
